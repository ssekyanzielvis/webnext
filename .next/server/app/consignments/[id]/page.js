(()=>{var e={};e.id=984,e.ids=[984],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},633:(e,s,n)=>{"use strict";n.r(s),n.d(s,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),n(8640),n(1506),n(5866);var t=n(3191),i=n(8716),r=n(7922),a=n.n(r),l=n(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);n.d(s,o);let d=["",{children:["consignments",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,8640)),"C:\\LOGISTICS\\Logistics-and-Procurement-Management-App\\logistics\\web-next\\app\\consignments\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,1506)),"C:\\LOGISTICS\\Logistics-and-Procurement-Management-App\\logistics\\web-next\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\LOGISTICS\\Logistics-and-Procurement-Management-App\\logistics\\web-next\\app\\consignments\\[id]\\page.tsx"],u="/consignments/[id]/page",m={require:n,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/consignments/[id]/page",pathname:"/consignments/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5391:(e,s,n)=>{Promise.resolve().then(n.bind(n,2456))},9864:()=>{},190:(e,s,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},2456:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>l});var t=n(326),i=n(7577),r=n(5047),a=n(7574);function l(){let e=(0,a.e)();(0,r.useParams)(),(0,r.useRouter)();let[s,n]=(0,i.useState)(null),[l,o]=(0,i.useState)("user"),[d,c]=(0,i.useState)(!0),[u,m]=(0,i.useState)(null),[x,p]=(0,i.useState)(""),h=async t=>{if(!s)return;let{error:i}=await e.from("consignments").update({status:t}).eq("id",s.id);if(i){m(i.message);return}n({...s,status:t})},g=async()=>{if(!s||!x)return;let{error:t}=await e.from("consignments").update({driver_id:x,status:"assigned"}).eq("id",s.id);if(t){m(t.message);return}n({...s,driver_id:x,status:"assigned"}),p("")};if(d)return t.jsx("main",{className:"max-w-3xl mx-auto p-4",children:"Loadingâ€¦"});if(u)return t.jsx("main",{className:"max-w-3xl mx-auto p-4 text-red-600",children:u});if(!s)return t.jsx("main",{className:"max-w-3xl mx-auto p-4",children:"Not found"});let f="driver"===l,j="admin"===l||"other_admin"===l;return(0,t.jsxs)("main",{className:"max-w-3xl mx-auto p-4 space-y-4",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["Consignment #",s.id.slice(0,8)]}),(0,t.jsxs)("div",{className:"card p-4 space-y-2",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Pickup:"})," ",s.pickup_location]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Delivery:"})," ",s.delivery_location]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Item:"})," ",s.item_description]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Weight:"})," ",s.weight," kg"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Status:"})," ",t.jsx("span",{className:"px-2 py-0.5 rounded bg-gray-100 text-gray-800 text-xs",children:s.status})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Driver:"})," ",s.driver_id??"Unassigned"]}),s.special_instructions&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Notes:"})," ",s.special_instructions]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Created ",new Date(s.created_at).toLocaleString()]})]}),(f||j)&&(0,t.jsxs)("section",{className:"card p-4 space-y-3",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[f&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:()=>h("picked_up"),children:"Mark Picked Up"}),t.jsx("button",{className:"px-3 py-2 bg-indigo-600 text-white rounded",onClick:()=>h("in_transit"),children:"Mark In Transit"}),t.jsx("button",{className:"px-3 py-2 bg-green-600 text-white rounded",onClick:()=>h("delivered"),children:"Mark Delivered"})]}),j&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("button",{className:"px-3 py-2 bg-gray-700 text-white rounded",onClick:()=>h("pending"),children:"Set Pending"}),t.jsx("button",{className:"px-3 py-2 bg-orange-600 text-white rounded",onClick:()=>h("assigned"),children:"Set Assigned"}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm",children:"Assign driver:"}),t.jsx("input",{value:x,onChange:e=>p(e.target.value),placeholder:"driver uuid",className:"input"}),t.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded",onClick:g,children:"Assign"})]})]})]})]}),t.jsx("section",{children:t.jsx("a",{className:"text-blue-600 hover:underline",href:`/consignments/${s.id}/documents`,children:"Manage Documents"})})]})}},7574:(e,s,n)=>{"use strict";n.d(s,{e:()=>r});var t=n(474);let i=null;function r(){if(i)return i;let e="https://awjryaofcfuhyofqfixo.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF3anJ5YW9mY2Z1aHlvZnFmaXhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzA5MjYsImV4cCI6MjA3MzAwNjkyNn0.3ccRaiv7odT4xL6jI0f5dV9BrMnZw8LUeofJZ0ZOo5c";if(!e||!s)throw Error("Missing Supabase envs");return i=(0,t.createBrowserClient)(e,s,{cookies:{getAll:async()=>"undefined"==typeof document?[]:document.cookie.split(";").map(e=>e.trim()).filter(Boolean).map(e=>{let s=e.indexOf("=");return{name:s>=0?decodeURIComponent(e.slice(0,s)):e,value:s>=0?decodeURIComponent(e.slice(s+1)):""}}),setAll:async e=>(function(e){if("undefined"!=typeof document)for(let{name:s,value:n,options:t}of e){let e=`${encodeURIComponent(s)}=${encodeURIComponent(n)}`;t&&(t.maxAge&&(e+=`; Max-Age=${t.maxAge}`),t.expires&&(e+=`; Expires=${new Date(t.expires).toUTCString()}`),t.path&&(e+=`; Path=${t.path}`),t.domain&&(e+=`; Domain=${t.domain}`),t.sameSite&&(e+=`; SameSite=${t.sameSite}`),t.secure&&(e+="; Secure")),document.cookie=e}})(e)}})}},5047:(e,s,n)=>{"use strict";var t=n(7389);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}})},8640:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>t});let t=(0,n(8570).createProxy)(String.raw`C:\LOGISTICS\Logistics-and-Procurement-Management-App\logistics\web-next\app\consignments\[id]\page.tsx#default`)},1506:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>r,metadata:()=>i});var t=n(9510);n(7272);let i={title:"Logistics Portal",description:"Logistics & Procurement Management"};function r({children:e}){return t.jsx("html",{lang:"en",children:(0,t.jsxs)("body",{children:[t.jsx("header",{className:"w-full",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[t.jsx("a",{href:"/",className:"font-extrabold",children:"Logistics"}),(0,t.jsxs)("nav",{className:"flex gap-3 text-sm",children:[t.jsx("a",{href:"/client",className:"hover:underline",children:"Client"}),t.jsx("a",{href:"/driver",className:"hover:underline",children:"Driver"}),t.jsx("a",{href:"/admin",className:"hover:underline",children:"Admin"}),t.jsx("a",{href:"/admin/analytics",className:"hover:underline",children:"Analytics"}),t.jsx("a",{href:"/admin/fuel-cards",className:"hover:underline",children:"Fuel Cards"}),t.jsx("a",{href:"/admin/driver-locations",className:"hover:underline",children:"Driver Locations"}),t.jsx("a",{href:"/admin/settings",className:"hover:underline",children:"Settings"}),t.jsx("a",{href:"/admin/fuel-transactions",className:"hover:underline",children:"Fuel Txns"}),t.jsx("a",{href:"/chat",className:"hover:underline",children:"Chat"}),t.jsx("a",{href:"/chat/new",className:"hover:underline",children:"New Chat"}),t.jsx("a",{href:"/profile",className:"hover:underline",children:"Profile"}),t.jsx("a",{href:"/auth/logout",className:"hover:underline",children:"Logout"})]})]})}),e]})})}},7272:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var n=e=>s(s.s=e),t=s.X(0,[9276,4471,474],()=>n(633));module.exports=t})();