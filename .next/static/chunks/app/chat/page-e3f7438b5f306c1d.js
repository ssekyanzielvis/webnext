(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929],{6285:function(e,n,t){Promise.resolve().then(t.bind(t,4723))},4723:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return r}});var i,a,c=t(7437),o=t(2265),s=t(149);function r(){let e=(0,s.e)(),[n,t]=(0,o.useState)([]),[i,a]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{let{data:{user:n}}=await e.auth.getUser();if(!n){window.location.href="/auth/login";return}let{data:i,error:c}=await e.from("chat_rooms").select("id,user1_id,user2_id,last_activity").or("user1_id.eq.".concat(n.id,",user2_id.eq.").concat(n.id)).order("last_activity",{ascending:!1});!c&&i&&t(i),a(!1)})()},[e]),(0,c.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-6",children:[(0,c.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Chats"}),i?(0,c.jsx)("div",{children:"Loading..."}):(0,c.jsx)("ul",{className:"space-y-3",children:n.map(e=>(0,c.jsx)("li",{className:"card p-4",children:(0,c.jsxs)("a",{href:"/chat/".concat(e.id),className:"font-semibold",children:["Open chat ",e.id.substring(0,8),"..."]})},e.id))})]})}(i=a||(a={})).user="user",i.driver="driver",i.admin="admin",i.other_admin="other_admin"},149:function(e,n,t){"use strict";t.d(n,{e:function(){return c}});var i=t(1388);let a=null;function c(){if(a)return a;let e="https://awjryaofcfuhyofqfixo.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF3anJ5YW9mY2Z1aHlvZnFmaXhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzA5MjYsImV4cCI6MjA3MzAwNjkyNn0.3ccRaiv7odT4xL6jI0f5dV9BrMnZw8LUeofJZ0ZOo5c";if(!e||!n)throw Error("Missing Supabase envs");return a=(0,i.createBrowserClient)(e,n,{cookies:{getAll:async()=>"undefined"==typeof document?[]:document.cookie.split(";").map(e=>e.trim()).filter(Boolean).map(e=>{let n=e.indexOf("=");return{name:n>=0?decodeURIComponent(e.slice(0,n)):e,value:n>=0?decodeURIComponent(e.slice(n+1)):""}}),setAll:async e=>(function(e){if("undefined"!=typeof document)for(let{name:n,value:t,options:i}of e){let e="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t));i&&(i.maxAge&&(e+="; Max-Age=".concat(i.maxAge)),i.expires&&(e+="; Expires=".concat(new Date(i.expires).toUTCString())),i.path&&(e+="; Path=".concat(i.path)),i.domain&&(e+="; Domain=".concat(i.domain)),i.sameSite&&(e+="; SameSite=".concat(i.sameSite)),i.secure&&(e+="; Secure")),document.cookie=e}})(e)}})}}},function(e){e.O(0,[1388,2971,2117,1744],function(){return e(e.s=6285)}),_N_E=e.O()}]);