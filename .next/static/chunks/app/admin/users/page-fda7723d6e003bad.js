(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{8823:function(e,t,n){Promise.resolve().then(n.bind(n,7525))},7525:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(7437),s=n(2265),i=n(149),c=n(7824);function l(){let e=(0,i.e)(),[t,n]=(0,s.useState)([]),[l,r]=(0,s.useState)(!0),[d,o]=(0,s.useState)(null),[u,m]=(0,s.useState)("all"),x=(0,s.useCallback)(async()=>{r(!0);let t=e.from("users").select("*");"all"!==u&&(t=t.eq("role",u));let{data:a,error:s}=await t.order("created_at",{ascending:!1});s?o(s.message):n(a),r(!1)},[e,u]);async function p(t,n){let{error:a}=await e.from("users").update({role:n}).eq("id",t);a||x()}async function h(t){let{error:n}=await e.from("users").update({is_active:!t.is_active}).eq("id",t.id);n?o(n.message):x()}return(0,s.useEffect)(()=>{(async()=>{let{data:{user:t}}=await e.auth.getUser();if(!t){window.location.href="/auth/login";return}let n=(0,c.i)(t);if("admin"!==n&&"other_admin"!==n){window.location.href="/";return}await x()})()},[e,x]),(0,a.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-2",children:"User Management"}),(0,a.jsx)("div",{className:"flex gap-2 overflow-auto mb-4",children:["all","client","driver","admin","other_admin"].map(e=>(0,a.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1 rounded-full text-sm ".concat(u===e?"bg-[#4C6FFF] text-white":"bg-neutral-100"),children:e.replace("_"," ")},e))}),d&&(0,a.jsx)("div",{className:"text-red-600 text-sm mb-3",children:d}),l?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("table",{className:"w-full text-sm card",children:[(0,a.jsx)("thead",{className:"bg-neutral-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-3",children:"Name"}),(0,a.jsx)("th",{className:"text-left p-3",children:"Email"}),(0,a.jsx)("th",{className:"text-left p-3",children:"Role"}),(0,a.jsx)("th",{className:"text-right p-3",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-3",children:e.full_name||"â€”"}),(0,a.jsx)("td",{className:"p-3",children:e.email}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs bg-neutral-100",children:e.role}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_active?"Active":"Inactive"})]})}),(0,a.jsxs)("td",{className:"p-3 text-right space-x-2",children:[(0,a.jsx)("button",{className:"px-3 py-1 rounded-md bg-neutral-100",onClick:()=>p(e.id,"client"),children:"Client"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded-md bg-neutral-100",onClick:()=>p(e.id,"user"),children:"User"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded-md bg-neutral-100",onClick:()=>p(e.id,"driver"),children:"Driver"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded-md bg-neutral-100",onClick:()=>p(e.id,"admin"),children:"Admin"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded-md bg-neutral-100",onClick:()=>p(e.id,"other_admin"),children:"Other Admin"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded-md bg-neutral-100",onClick:()=>h(e),children:e.is_active?"Deactivate":"Activate"})]})]},e.id))})]})]})}},7824:function(e,t,n){"use strict";function a(e){if(!e)return"user";let t=e.user_metadata||{},n=e.app_metadata||{};return t.role||n.role||"user"}n.d(t,{i:function(){return a}})},149:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var a=n(1388);let s=null;function i(){if(s)return s;let e="https://awjryaofcfuhyofqfixo.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF3anJ5YW9mY2Z1aHlvZnFmaXhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzA5MjYsImV4cCI6MjA3MzAwNjkyNn0.3ccRaiv7odT4xL6jI0f5dV9BrMnZw8LUeofJZ0ZOo5c";if(!e||!t)throw Error("Missing Supabase envs");return s=(0,a.createBrowserClient)(e,t,{cookies:{getAll:async()=>"undefined"==typeof document?[]:document.cookie.split(";").map(e=>e.trim()).filter(Boolean).map(e=>{let t=e.indexOf("=");return{name:t>=0?decodeURIComponent(e.slice(0,t)):e,value:t>=0?decodeURIComponent(e.slice(t+1)):""}}),setAll:async e=>(function(e){if("undefined"!=typeof document)for(let{name:t,value:n,options:a}of e){let e="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));a&&(a.maxAge&&(e+="; Max-Age=".concat(a.maxAge)),a.expires&&(e+="; Expires=".concat(new Date(a.expires).toUTCString())),a.path&&(e+="; Path=".concat(a.path)),a.domain&&(e+="; Domain=".concat(a.domain)),a.sameSite&&(e+="; SameSite=".concat(a.sameSite)),a.secure&&(e+="; Secure")),document.cookie=e}})(e)}})}}},function(e){e.O(0,[1388,2971,2117,1744],function(){return e(e.s=8823)}),_N_E=e.O()}]);